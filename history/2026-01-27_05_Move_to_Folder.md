# 2026-01-27 Move to Folder Implementation

## 1. 개요
사용자가 파일 및 폴더를 다른 폴더로 이동하여 문서를 체계적으로 정리할 수 있도록 "폴더로 이동" 기능을 구현했습니다.

## 2. 주요 변경 사항

### Backend (`platform-backend`)
*   **FileController**: `PUT /api/files/{id}/move` 엔드포인트 추가.
    *   `targetFolderId`를 받아 파일의 `folderId`를 업데이트.
    *   `targetFolderId`가 null일 경우 최상위(Root)로 이동.
*   **FolderController**: `PUT /api/folders/{id}/move` 엔드포인트 추가.
    *   폴더의 `parentFolderId`를 업데이트.
    *   **순환 이동 방지**: 폴더를 자기 자신으로 이동할 수 없도록 유효성 검사 추가 (기본적인 `id == targetId` 체크).
*   **UserFile Entity**: `getFolderId`, `setFolderId` 메서드 추가.

### Frontend (`frontend`)
*   **UserDashboard.tsx**:
    *   **이동 버튼 추가**: 파일/폴더 카드 및 리스트 뷰에 "이동" 아이콘(파란색 폴더) 추가.
    *   **Folder Picker Modal 구현**:
        *   이동할 대상을 선택하면 모달이 팝업됨.
        *   "내 드라이브 (최상위)" 및 기존 폴더 목록 표시.
        *   현재 이동 중인 폴더 자신은 목록에서 제외하거나 선택 불가능하도록 처리.
    *   **이동 로직 (`handleMove`)**:
        *   선택한 대상 폴더 ID로 API 호출 (`PUT`).
        *   이동 성공 시 데이터 새로고침 및 모달 닫기.
    *   **UX 개선 (Step 5)**:
        *   **2단계 이동**: 즉시 이동이 아닌, 대상을 선택하고 "여기로 이동" 버튼을 눌러야 이동되도록 변경.
        *   **시각적 피드백**: 선택된 폴더에 배경색(#EEF2FF)과 인디고 텍스트 색상을 적용하여 선택 상태 강조.
        *   **모달 스타일**: 스크롤바 커스터마이징, 폴더 아이콘 정렬 등 디자인 다듬기.

## 3. 검증 결과
*   **파일 이동**: 파일이 선택한 폴더로 정상적으로 이동됨을 확인 (UI에서 사라지고 해당 폴더 진입 시 나타남).
*   **폴더 이동**: 하위 폴더로 이동 및 최상위로 다시 이동 기능 작동 확인.
*   **예외 처리**: 자기 자신에게 이동 시도 시 경고 메시지 출력 ("자신에게로 이동할 수 없습니다") 확인.

## 4. 향후 개선 사항
*   **계층형 폴더 선택**: 현재는 평탄화(Flattened)된 리스트만 보여주지만, 추후 트리(Tree) 구조로 폴더를 탐색할 수 있도록 UI 개선 필요.
*   **Drag & Drop**: 클릭 방식 외에 드래그 앤 드롭으로 이동하는 기능 추가 고려.

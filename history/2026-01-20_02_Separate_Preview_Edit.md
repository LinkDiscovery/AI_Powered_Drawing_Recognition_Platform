# Preview vs Edit 페이지 분리 작업 내역

**날짜:** 2026-01-20
**작업자:** AI Assistant (Antigravity)

## 1. 개요 (Overview)
기존에는 파일 업로드 직후와 대시보드에서 수정할 때 모두 동일한 `PreviewPage`를 사용했습니다. 이로 인해 대시보드에서 진입 시 로직이 복잡하고, **새로고침 시 데이터가 날아가는 문제**가 있었습니다.
이를 해결하기 위해 **업로드 확인용(Preview)**과 **본격 수정용(Edit)**으로 페이지와 로직을 완전히 분리했습니다.

## 2. 작업 내용 (Changes)

### A. 백엔드 (Backend)
*   **파일:** `FileController.java`
*   **기능 추가:** `GET /api/files/{id}` 엔드포인트 추가.
    *   **목적:** `EditPage`에서 새로고침 하더라도 파일의 정보(메타데이터, BBox, 회전 상태 등)를 스스로 다시 불러올 수 있도록 하기 위함.
    *   기존에는 리스트 조회(`GET /api/user/files`)만 있었음.

### B. 프론트엔드 - 페이지 생성 (Frontend - EditPage)
*   **파일:** `src/pages/edit/EditPage.tsx` (신규 생성)
*   **특징:**
    *   URL 파라미터(`:id`)를 통해 파일 ID를 인식.
    *   진입 시 백엔드에서 파일 데이터와 메타데이터를 직접 Fetch (새로고침 시에도 유지).
    *   `PdfViewer`를 사용하여 BBox 수정, 회전, 저장 등 모든 기능 제공.
    *   "뒤로 가기" 버튼 클릭 시 대시보드(`/dashboard`)로 이동.

### C. 프론트엔드 - 라우팅 및 연동 (Routing & Integration)
*   **파일:** `src/router.tsx`
    *   `/edit/:id` 라우트 추가.
*   **파일:** `src/pages/dashboard/UserDashboard.tsx`
    *   파일 이름 클릭 시 기존 `PreviewPage`로 이동하던 로직을 **`/edit/{id}`로 이동**하도록 변경.
    *   복잡한 Context 데이터 전달 로직 제거 (이제 ID만 넘기면 됨).

## 3. 개선 효과 (Benefits)
1.  **새로고침 안정성:** 수정 페이지에서 F5를 눌러도 파일이 열린 상태로 유지됩니다.
2.  **로직 단순화:** `PreviewPage`는 업로드 직후의 단순 확인용으로, `EditPage`는 상세 수정용으로 역할이 명확해져 유지보수가 쉬워집니다.
3.  **사용성 향상:** 대시보드에서 진입하는 사용자는 더 안정적인 "편집 모드"를 경험할 수 있습니다.

---
*Generated by Antigravity*
